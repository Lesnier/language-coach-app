<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Schedule Meeting</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="meetingForm">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Select Date</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-datetime
          formControlName="date"
          presentation="date"
          [min]="minDate"
          (ionChange)="onDateChange($event)"
        ></ion-datetime>
      </ion-card-content>
    </ion-card>

    <ion-card *ngIf="selectedDate">
      <ion-card-header>
        <ion-card-title>Select Time</ion-card-title>
        <ion-card-subtitle
          >Available times for {{ selectedDate | date:'fullDate'
          }}</ion-card-subtitle
        >
      </ion-card-header>
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="4" *ngFor="let slot of timeSlots">
              <ion-button
                expand="block"
                [color]="selectedTimeSlot === slot.label ? 'success' : 'medium'"
                [disabled]="!slot.available"
                (click)="selectTimeSlot(slot)"
                class="time-slot-button"
              >
                <ion-icon name="time-outline" slot="start"></ion-icon>
                {{ slot.label }}
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-button
      expand="block"
      (click)="submit()"
      [disabled]="!selectedDate || !selectedTimeSlot"
      class="ion-margin-top"
    >
      Schedule Meeting
    </ion-button>
  </form>
</ion-content>
